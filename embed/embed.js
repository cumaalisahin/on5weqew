parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"EHrm":[function(require,module,exports) {
module.exports={name:"embed",version:"1.0.0",main:"index.js",license:"MIT",scripts:{dev:"parcel src/index.ts --port 1111 --hmr-port 33827",build:"parcel build src/index.ts -o embed --no-cache --detailed-report"},devDependencies:{"@types/node":"^10.12.24","parcel-bundler":"^1.11.0",typescript:"^3.5.2"}};
},{}],"7QCb":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var i in t=arguments[a])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},t=this&&this.__rest||function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(a[r[i]]=e[r[i]])}return a};exports.__esModule=!0;var a=require("../package.json"),r={width:"0px",height:"0px",border:"0px",position:"fixed",bottom:"0px",right:"0px",visibility:"visible",background:"transparent",opacity:1,"z-index":"2147483646 !important"},i={id:"chatmaster",frameborder:0,allowtransparency:!0,role:"complementary",title:"Chatmaster Messenger",scrolling:"no",allow:"autoplay"},s={debug:!1,lang:"en",disableRender:!1,disableWelcomeScreen:!1,utmSource:"unknow"},n=function(){return function(n){var o=this;this.handleMessage=function(e){if(console.debug("handleMessage",e.data),"https://go.chatmaster.io"===e.origin){var t=e.data[0],a=e.data.length>1?e.data[1]:void 0;switch(console.debug("embed",t,a),t){case"external-forward":window.dispatchEvent(new CustomEvent("chatmaster.external.forward",{}));break;case"update-size":o.$iframe.style.width=a.w,o.$iframe.style.height=a.h;break;case"ready":o.handleSizeChange();break;case"render.ready":o.push({action:"update.store",data:{theme:o.theme,texts:o.texts,avatar:o.avatar,social:o.social,utmSource:o.opts.utmSource}}),!1===o.opts.disableRender?o.push({action:"render"}):window.dispatchEvent(new CustomEvent("chatmaster.render.ready",{detail:a}))}}},this.handleSizeChange=function(){console.debug("[embed.ts] resize"),o.push({action:"resize",size:{w:window.innerWidth,h:window.innerHeight}})},this.push=function(e){o.$iframe&&o.$iframe.contentWindow.postMessage(e,"https://go.chatmaster.io")},this.init=function(){for(var e in o.$iframe=document.createElement("iframe"),o.iframeAttrs)if(o.iframeAttrs.hasOwnProperty(e)){var t=o.iframeAttrs[e];o.$iframe.setAttribute(e,t)}window.addEventListener("message",o.handleMessage),console.log("message event bind"),document.body.appendChild(o.$iframe),window.addEventListener("resize",o.handleSizeChange,!1)},this.destroy=function(){o.$iframe&&o.$iframe.remove(),window.removeEventListener("message",o.handleMessage)};var h=n.theme,d=n.texts,c=n.avatar,l=n.social,m=t(n,["theme","texts","avatar","social"]);this.theme=h,this.texts=d,this.avatar=c,this.social=l,this.opts=e({},s,m,{ver:a.version}),console.log("process.env.BASE_URL","https://go.chatmaster.io",this.opts);var p=Object.keys(this.opts).map(function(e){return e+"="+o.opts[e]}).join("&");this.iframeAttrs=e({},i,{style:Object.keys(r).map(function(e){return e+":"+r[e]}).join(";"),src:"https://go.chatmaster.io/messenger/index.html?"+p}),this.$iframe=void 0,this.init()}}();window.Chatmaster=n;
},{"../package.json":"EHrm"}]},{},["7QCb"], null)
//# sourceMappingURL=/embed.map